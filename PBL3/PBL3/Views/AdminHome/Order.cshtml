
@using PBL3.Models;
@{
    ViewBag.Title = "Đơn hàng";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    List<Orderr> orderrs = Model;
    User a = (User)Session[PBL3.Controllers.RouteController.Account_Session];
}

<link href="~/Theme/styles/OrderPage.css" rel="stylesheet" />
<div class="main-content">
    <div class="Action-page-name" style="display:none">Order</div>
    <header>
        <h2>
            <label for="nav-toggle">
                <span class="fa-solid fa-bars"></span>
            </label>
            @ViewBag.Title
        </h2>

        <div class="search-wrapper">
            <span class="fa-solid fa-magnifying-glass"></span>
            <input type="search" placeholder="Search here" />
        </div>

        <div class="user-wrapper" onclick="menuToggle();">
            <img src="~/Theme/images/profile.png" alt="" width="30px" height="30px">
            <div>
                <h4>@a.name</h4>
                <small>Admin</small>
            </div>
            <div class="menu">
                <ul>

                    <li><span class="fa-solid fa-arrow-right-from-bracket"></span><a href="~/AdminHome/Logout">Log out</a></li>
                </ul>
            </div>
        </div>
    </header>

    <main>
        <div class="recent-grid_5">
            <div class="projects_5">
                <div class="card_5">

                    <div class="card-body_5">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered mydatatable" id="table" style="width: 100%"
                                   data-toggle="table"
                                   data-id-table="advancedTable">
                                <thead>
                                    <tr>
                                        <th data-field="Id" class="col-id">ID</th>
                                        <th data-field="Status" class="col-status">Status</th>
                                        <th data-field="UserId" class="col-userid">User ID</th>
                                        <th data-field="PersonId" class="col-personid">Person ID</th>
                                        <th data-field="TimeConfirm" class="col-timeconfirm">Time Confirm</th>
                                        <th data-field="TimeUpdate" class="col-timeupdate">Time Update</th>
                                        <th data-field="Action" class="col-action">Action</th>
                                    </tr>
                                </thead>
                                <tbody>


                                    @foreach (var i in Model)
                                    {
                                        <tr>
                                            <td>@i.id</td>
                                            <td>@i.status</td>
                                            <td>@i.userid</td>
                                            <td>@i.personid</td>
                                            <td>@i.TimeConfirm</td>
                                            <td>@i.TimeUpdate</td>
                                            <td>
                                                <input type="submit" value="Edit status" class="button-edit" onclick="truyendulieu(@i.id)" />
                                            </td>

                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </main>
</div>

<div class="bg-modal-T">
    <div class="cards-T">
        <div class="close-T">+</div>
        <div class="title-T">Edit status</div>
        <div class="edit-form-T">
            <form action="/AdminHome/EditOrder">
                <input type="text" style="display :none;" id="edit1" name="id" value="" />
                <div class="input-box">
                    <span class="details" style="padding-top: 10px;">Status</span>
                    <div class="search_select_box">
                        <select class="options" data-live-search="true" name="status">
                            <option>Đã xác nhận</option>
                            <option>Đang giao</option>
                            <option>Đã hoàn thành</option>
                        </select>
                    </div>
                </div>
                <div class="button">
                    <input type="submit" id="edit-status" value="Edit status" style="width: 130px;">
                </div>
            </form>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    document.querySelector('.close-T').addEventListener('click', function () {
        document.querySelector('.bg-modal-T').style.display = 'none';
    });

    $(document).on('click', '.button-edit', function () {
        document.querySelector('.bg-modal-T').style.display = 'flex';
    })
</script>

<script>
    $(document).ready(function () {
        $('.search_select_box select').selectpicker();
    })
</script>

<script>
    function detailFormatter(index, row) {
        var html = []
        var indexs = 0

        $.each(row, function (key, value) {
            var columns = $("th:eq(" + (indexs + 1) + ")").data("field")
            if (columns != undefined) {
                html.push('<p><b>' + columns + ' </b> : ' + row[columns] + '</p>')
                indexs++;
            }
        })
        return html;
    }
</script>
<script>
    console.log(10000000000000);
    function truyendulieu(id) {
        document.getElementById("edit1").value = id;
        console.log(id);
    }
</script>